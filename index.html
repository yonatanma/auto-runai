<!doctype html>
<html lang="en" data-lang="en">
<head>
  <link href="https://cdn.jsdelivr.net/npm/@n8n/chat/dist/style.css" rel="stylesheet" />
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Auto Run AI — Automation & AI</title>
  <meta name="description" content="Automation, RPA and AI assistants that save time and money.">
  <meta name="theme-color" content="#0f172a">
  <style>
    :root{
      --bg:#0b1020; --bg2:#0e1530; --card:#0f162e;
      --text:#e7ecf4; --muted:#9aa6b2; --line:#1f2a48;
      --brand:#22c55e; --brand2:#a3e635;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --chat--message--font-size: 16px;
      --chat--window--width: 380px; 
    }

    /* --- הגדרות בסיס לווידג'ט --- */
    .n8n-chat-widget {
        bottom: 20px !important;
        z-index: 2147483647 !important;
    }

    /* --- עיצוב ספציפי לעברית (יופעל כשה-HTML הוא he) --- */
    html[lang="he"] .n8n-chat-widget {
        left: auto !important;
        right: 20px !important;
        direction: rtl !important;
        text-align: right !important;
    }
    html[lang="he"] .n8n-chat-widget * {
        text-align: right !important;
        direction: rtl !important;
    }
    html[lang="he"] .chat-message-row {
        flex-direction: row-reverse !important;
    }
    html[lang="he"] .chat-message-avatar {
        margin-left: 10px !important;
        margin-right: 0 !important;
    }

    /* --- עיצוב ספציפי לאנגלית (יופעל כשה-HTML הוא en) --- */
    html[lang="en"] .n8n-chat-widget {
        left: auto !important;
        right: 20px !important;
        direction: ltr !important;
        text-align: left !important;
    }

    /* --- שאר העיצוב של האתר --- */
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),var(--bg2));color:var(--text);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    a{color:inherit;text-decoration:none}
    .container{max-width:1120px;margin:0 auto;padding:24px}
    .nav{display:flex;align-items:center;justify-content:space-between}
    .brand{display:flex;gap:10px;align-items:center;font-weight:700;letter-spacing:.2px}
    .badge{padding:4px 10px;border:1px solid var(--line);border-radius:999px;background:#0f1a3a;color:#cde7ff;font-size:12px}
    .lang{display:flex;gap:8px}
    .chip{padding:8px 12px;border-radius:999px;border:1px solid var(--line);background:#132046;color:#fff;cursor:pointer}
    .chip.active{background:#213264}
    .btn{display:inline-flex;gap:8px;align-items:center;padding:12px 18px;border-radius:12px;border:1px solid var(--line);background:#132046;color:#fff;box-shadow:var(--shadow)}
    .btn.primary{background:linear-gradient(90deg,var(--brand),var(--brand2));color:#0b1020;border:none}
    .section{padding:56px 0}
    .card{background:var(--card);border:1px solid var(--line);border-radius:20px;padding:32px;box-shadow:var(--shadow)}
    .hero h1{margin:0 0 8px;font-size:42px;line-height:1.15}
    .muted{color:var(--muted)}
    .stack{display:grid;gap:14px}
    .row{display:flex;gap:12px;flex-wrap:wrap}
    .grid{display:grid;gap:16px}
    @media(min-width:900px){.grid.cols-3{grid-template-columns:repeat(3,1fr)}}
    .kpi{display:grid;gap:8px}
    .form{display:grid;gap:12px;max-width:640px}
    .input,.textarea{width:100%;padding:12px 14px;border-radius:12px;background:#0e1a3a;border:1px solid var(--line);color:#fff}
    .textarea{min-height:140px;resize:vertical}
    .ok{display:none;margin-top:8px;color:#9effc3}
    .err{display:none;margin-top:8px;color:#ff9e9e}
    .i18n{display:none}
    html[data-lang="en"] .en{display:block}
    html[data-lang="he"] .he{display:block}
    html[data-lang="he"] body{direction:rtl}
    html[data-lang="he"] h1,html[data-lang="he"] h2,html[data-lang="he"] p{text-align:right}
  </style>
</head>
<body>
  <header class="container nav">
    <div class="brand">
      <svg viewBox="0 0 24 24" width="26" height="26" fill="none" aria-hidden="true">
        <circle cx="12" cy="12" r="10" stroke="#22c55e" stroke-width="2"/>
        <path d="M7 12a5 5 0 1 0 10 0" stroke="#a3e635" stroke-width="2"/>
      </svg>
      <span>Auto Run AI</span>
      <span class="badge">RPA • AI • Automation</span>
    </div>
    <div class="lang">
      <button id="b-en" class="chip active" onclick="setLang('en')">EN</button>
      <button id="b-he" class="chip" onclick="setLang('he')">עברית</button>
      <a class="btn primary" href="mailto:contact@auto-runai.com">Get a Proposal</a>
    </div>
  </header>

  <main class="container">
    <section class="section hero">
      <div class="i18n en">
        <h1>RPA to AI — Automation that Delivers Results</h1>
        <p class="muted">We design and deploy intelligent automations in Hebrew & English.</p>
      </div>
      <div class="i18n he">
        <h1>RPA ו AI — אוטומציה שמביאה תוצאות</h1>
        <p class="muted">אנו מתכננים ומיישמים אוטומציות חכמות בעברית ובאנגלית.</p>
      </div>
      <div class="row">
        <a class="btn primary" href="mailto:contact@auto-runai.com">contact@auto-runai.com</a>
      </div>
    </section>

    </main>

  <footer class="container" style="padding:28px 0;border-top:1px solid var(--line);color:#9aa6b2">
    © <span id="y"></span> Auto Run AI
  </footer>

  <div id="n8n-chat-target"></div>

  <script type="module">
    import { createChat } from 'https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js';

    document.getElementById('y').textContent = new Date().getFullYear();

    // פונקציה לבניית הצ'אט מחדש לפי השפה
    window.mountChat = function(lang) {
        // 1. ניקוי הצ'אט הקודם (אם קיים)
        const target = document.getElementById('n8n-chat-target');
        target.innerHTML = ''; 

        // 2. הגדרת הקונפיגורציה לפי השפה
        const isHebrew = lang === 'he';

        const chatConfig = {
            webhookUrl: 'https://n8n.auto-runai.com/webhook/19b3b571-6d49-4246-a195-dccd4f46667c/chat', // החלף לכתובת שלך!
            target: '#n8n-chat-target', // טוען את הצ'אט לתוך הדיב שיצרנו
            
            // מפריד את ההיסטוריה בין השפות!
            chatSessionKey: isHebrew ? 'session_he_v1' : 'session_en_v1',
            
            // הודעות פתיחה מותאמות שפה
            initialMessages: isHebrew 
                ? ['שלום! אני העוזר הווירטואלי של המועצה.', 'איך אני יכול לעזור לך היום?']
                : ['Hi there! I am the virtual assistant.', 'How can I help you today?'],
            
            // הגדרות טקסט לממשק
            i18n: {
                en: {
                    title: isHebrew ? 'מוקד מידע שומרון' : 'Auto Run AI Support',
                    subtitle: isHebrew ? 'מענה אוטומטי 24/7' : '24/7 Automated Support',
                    getStarted: isHebrew ? 'התחל שיחה' : 'Start Chat',
                    inputPlaceholder: isHebrew ? 'הקלד את השאלה שלך כאן...' : 'Type your question...',
                }
            },

            // הגדרות כיוון (CSS מטפל ברוב, אבל זה לגיבוי)
            style: {
                '--chat-container-direction': isHebrew ? 'rtl' : 'ltr',
                '--chat-layout-direction': isHebrew ? 'rtl' : 'ltr',
            }
        };

        // 3. יצירת הצ'אט החדש
        createChat(chatConfig);
    }

    // פונקציית החלפת השפה הראשית
    window.setLang = function(lang){
      // עדכון ה-HTML והכפתורים
      document.documentElement.setAttribute('data-lang', lang);
      document.documentElement.lang = lang;
      document.getElementById('b-en').classList.toggle('active', lang==='en');
      document.getElementById('b-he').classList.toggle('active', lang==='he');
      
      // אתחול מחדש של הצ'אט בשפה הנכונה
      window.mountChat(lang);
    }

    // הפעלה ראשונית בטעינת הדף
    const initialLang = document.documentElement.getAttribute('data-lang') || 'en';
    window.setLang(initialLang);

  </script>
</body>
</html>
